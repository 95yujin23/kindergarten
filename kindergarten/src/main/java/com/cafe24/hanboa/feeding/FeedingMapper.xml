<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.cafe24.hanboa.feeding.FeedingMapper">

<!-- 급식신청 전체조회 -->
	<select id="getFeedingApplication"
			resultType="com.cafe24.hanboa.feeding.FeedingApplication">
		SELECT
			feeding_application_cd as feedingApplicationCd
			,kids_cd as kidsCd
			,feeding_monthly_cd as feedingMonthlyCd
			,feap_expense_month as feapEspenseMonth
			,feap_closing_income as feapClosingIncome
			,feap_closing_option as feapClosingOption
			,feap_division as feapDivision
			,feap_registration_date as feapRegistrationDate
			,feap_registrant as feapRegistrant
			,license_kindergarten as licenseKindergarten
		FROM hanboa.TB_FEEDING_APPLICATION				
	</select>
<!-- 급식신청 항목별조회 -->
	<select id = "selectFeapONE"
			resultType="com.cafe24.hanboa.feeding.FeedingApplication">
		SELECT 
			feeding_application_cd as feedingApplicationCd
			,kids_cd as kidsCd
			,feeding_monthly_cd as feedingMonthlyCd
			,feap_expense_month as feapExpenseMonth
			,feap_closing_income as feapClosingIncome
			,feap_closing_option as feapClosingOption
			,feap_division as feapDivision
		FROM hanboa.TB_FEEDING_APPLICATION
		WHERE feeding_application_cd = #{feedingApplicationCd}
	</select>
	
<!-- 급식신청 업데이트 -->	
	<update id="feapModify" parameterType="com.cafe24.hanboa.feeding.FeedingApplication">
		UPDATE TB_FEEDING_APPLICATION
			SET
			feeding_application_cd = #{feedingApplicationCd}
			,kids_cd = #{kidsCd}
			,feeding_monthly_cd = #{feedingMonthlyCd}
			,feap_expense_month = #{feapExpenseMonth}
			,feap_closing_income = #{feapClosingIncome}
			,feap_closing_option = #{feapClosingOption}
			,feap_division = #{feapDivision}
		WHERE feeding_application_cd = #{feedingApplicationCd}
	</update>
	
<!-- 급식신청 등록 -->
	<insert id="feapInsert" 
			parameterType="com.cafe24.hanboa.feeding.FeedingApplication">
	INSERT INTO TB_FEEDING_APPLICATION
			(feeding_application_cd
			,kids_cd
			,feeding_monthly_cd
			,feap_expense_month
			,feap_closing_income
			,feap_closing_option
			,feap_division
			,feap_registration_date
			,feap_registrant
			,license_kindergarten)
	VALUES
			(#{feedingApplicationCd})
			,#{kidsCd}
			,#{feedingMonthlyCd}
			,#{feapExpenseMonth}
			,#{feapClosingIncome}
			,#{feapClosingOption}
			,#{feapDivision}
			,#{feapRegistrationDate}
			,#{feapRegistrant}
			,#{licenseKindergarten})			
	</insert>			
	
<!-- 식단메뉴조회 -->
	<select id="getFeedingMenuList"
			resultType="com.cafe24.hanboa.feeding.FeedingMenu">
	SELECT
			feeding_menu_cd as feedingMenuCd
			,feme_date as menuDate
			,feme_lunch_calory_protein as lunchCaloryProtein
			,feme_morning_snack as morningSnack
			,feme_afternoon_snack as afternoonSnack
			,feme_origin as origin 
			,feme_manager as menuManager
			,license_kindergarten as licenseKindergarten
	FROM TB_FEEDING_MENU		
	</select>
	
<!-- 식단메뉴 항목벽조회 -->
	<select id = "getFemeOne"
			resultType="com.cafe24.hanboa.feeding.FeedingMenu">
	SELECT
			feeding_menu_cd as feedingMenuCd
			,feme_date as menuDate
			,feme_lunch_calory_protein as lunchCaloryProtein
			,feme_morning_snack as morningSnack
			,feme_afternoon_snack as afternoonSnack
			,feme_origin as origin 
			,feme_manager as menuManager
	FROM TB_FEEDING_MENU
	WHERE feeding_menu_cd = #{feedingMenuCd}			
	</select>
	
<!-- 식단 메뉴 업데이트 -->
	<update id = "modifyFeme"
			parameterType = "com.cafe24.hanboa.feeding.FeedingMenu">
	UPDATE TB_FEEDING_MENU
		SET
			feeding_menu_cd = #{feedingMenuCd}
			,feme_date = #{menuDate}
			,feme_lunch_calory_protein = #{lunchCaloryProtein}
			,feme_morning_snack = #{morningSnack}
			,feme_afternoon_snack = #{afternoonSnack}
			,feme_origin = #{origin}
			,feme_manager = #{menuManager}
	WHERE feeding_menu_cd = #{feedingMenuCd}
	</update>
	
<!-- 식단메뉴등록 -->
	<insert id = "insertFeme"
			parameterType = "com.cafe24.hanboa.feeding.FeedingMenu">
	INSERT INTO TB_FEEDING_MENU(
		feeding_menu_cd
		,feme_date
		,feme_lunch_calory_protein
		,feme_morning_snack
		,feme_afternoon_snack
		,feme_origin
		,feme_manager
		,license_kindergarten)		
	VALUES(
		#{feedingMenuCd}
		,#{menuDate}
		,#{lunchCaloryProtein}
		,#{morningSnack}
		,#{afternoonSnack}
		,#{origin}
		,#{menuManager}
		,#{licenseKindergarten})
	</insert>
			
<!-- 월별급식 조회 -->
	<select id="getfemoList"
			resultType="com.cafe24.hanboa.feeding.FeedingMonthly">
	SELECT
			feeding_monthly_cd as feedingMonthlyCd
			,femo_feeding_month as femoFeedingMonth
			,femo_feeding_year as femoFeedingYear
			,femo_cook as femoCook
			,femo_operation_method as femoOperationMethod
			,femo_cafeteria_reported_check as femoCafeteriaReportedCheck
			,contract_cd as contractCd
			,femo_expenditure_cost as femoExpenditureCost
			,femo_closing_cost as femoClosingCost
			,femo_closing_option as femoClosingOption
			,femo_registration_date as femoRegistrationDate
			,femo_registrant as femoRegistrant
			,license_kindergarten as licenseKindergarten
	FROM TB_FEEDING_MONTHLY
	</select>
	
<!-- 월별급식 항목별 조회 -->
	<select id="getfemoOne"
			resultType="com.cafe24.hanboa.feeding.FeedingMonthly">
	SELECT
			feeding_monthly_cd as feedingMonthlyCd
			,femo_feeding_month as femoFeedingMonth
			,femo_feeding_year as femoFeedingYear
			,femo_cook as femoCook
			,femo_operation_method as femoOperationMethod
			,femo_cafeteria_reported_check as femoCafeteriaReportedCheck
			,contract_cd as contractCd
			,femo_expenditure_cost as femoExpenditureCost
			,femo_closing_cost as femoClosingCost
			,femo_closing_option as femoClosingOption
	FROM TB_FEEDING_MONTHLY
	WHERE feeding_monthly_cd = #{feedingMonthlyCd}	 		
	</select>
	
<!-- 월별급식 수정 -->
	<update id="modifyFemo"
			parameterType="com.cafe24.hanboa.feeding.FeedingMonthly">
	UPDATE	TB_FEEDING_MONTHLY
	SET
			feeding_monthly_cd = #{feedingMonthlyCd}
			,femo_feeding_month = #{femoFeedingMonth}
			,femo_feeding_year = #{femoFeedingYear}
			,femo_cook = #{femoCook}
			,femo_operation_method = #{femoOperationMethod}
			,femo_cafeteria_reported_check = #{femoCafeteriaReportedCheck}
			,contract_cd = #{contractCd}
			,femo_expenditure_cost = #{femoExpenditureCost}
			,femo_closing_cost = #{femoClosingCost}
			,femo_closing_option = #{femoClosingOption}
	WHERE feeding_monthly_cd = #{feedingMonthlyCd}				
	</update>
			
<!-- 식중독현황 조회 -->
	<select id="getFepoList"
			resultType="com.cafe24.hanboa.feeding.FeedingPoisonning">
		SELECT
			food_poisonning_generation_cd as foodPoisonningGenerationCd
			,feeding_monthly_cd as feedingMonthlyCd
			,fopo_generation_date as fepoGenerationDate
			,fopo_whole_kids_count as fopoWholeKidsCount
			,fopo_generated_kids_count as fopoGeneratedKidsCount
			,fopo_food_poisonning_kids as fopoFoodPoisonningKids
			,fopo_processing_result as fopoProcessingResult
			,fopo_registration_date as fopoRegistrationDate
			,fopo_registrant as registrant
			,license_kindergarten as licenseKindergarten
		FROM TB_FOOD_POISONNING_PROCESSING			
	</select>
	
<!-- 식중독 항목별조회 -->
	<select id ="getFepoOne"
			resultType="com.cafe24.hanboa.feeding.FeedingPoisonning">
		SELECT
			food_poisonning_generation_cd as foodPoisonningGenerationCd
			,feeding_monthly_cd as feedingMonthlyCd
			,fopo_generation_date as fepoGenerationDate
			,fopo_whole_kids_count as fopoWholeKidsCount
			,fopo_generated_kids_count as fopoGeneratedKidsCount
			,fopo_food_poisonning_kids as fopoFoodPoisonningKids
			,fopo_processing_result as fopoProcessingResult
		FROM TB_FOOD_POISONNING_PROCESSING
		WHERE food_poisonning_generation_cd = #{foodPoisonningGenerationCd}
	</select>
	
<!-- 식중독 수정 -->
	<update id ="modifyFepo"
			parameterType="com.cafe24.hanboa.feeding.FeedingPoisonning">
		UPDATE TB_FOOD_POISONNING_PROCESSING
		SET
			food_poisonning_generation_cd = #{foodPoisonningGenerationCd}
			,feeding_monthly_cd = #{feedingMonthlyCd}
			,fopo_generation_date = #{fepoGenerationDate}
			,fopo_whole_kids_count = #{fopoWholeKidsCount}
			,fopo_generated_kids_count = #{fopoGeneratedKidsCount}
			,fopo_food_poisonning_kids = #{fopoFoodPoisonningKids}
			,fopo_processing_result = #{fopoProcessingResult}
		WHERE food_poisonning_generation_cd = #{foodPoisonningGenerationCd}
	</update>



</mapper>